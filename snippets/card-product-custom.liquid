<div class="custom__product-card">
  {%- if card_product.variants[0].metafields.custom.product_image_1 != blank -%}
    <div class="product-card-img-wrapper img__wrapper">
      {%- assign img_height = card_product.variants[0].metafields.custom.product_image_1.width | divided_by: card_product.variants[0].metafields.custom.product_image_1.aspect_ratio -%}
  
      {{ card_product.variants[0].metafields.custom.product_image_1 | image_url: width: 1000 | image_tag:
        height: img_height,
        class: "main_product_img",
        width: card_product.variants[0].metafields.custom.product_image_1.width,
        loading: 'lazy'
      }}
      <div class="carousel" data-flickity='{ "fullscreen": true, "lazyLoad": 1, "pageDots": false }'>
        {% for variant in card_product.variants %}
          <div class="carousel-cell"
            data-variant-main-img="{{ variant.metafields.custom.product_image_1 | image_url: width: 1000 }}"
            >
            <img class="carousel-cell-image"
              data-flickity-lazyload="{{ variant.metafields.custom.product_image_2 | image_url: width: 1000 }}"
              />
          <div class="variant-title" style="z-index: 11;">{{ variant.title }}</div>
          </div>
        {% endfor %}
      </div>

      <div class="variants-counter">{{ card_product.variants.size }} Colors</div>
    </div>
    {%- endif -%}
  <div class="product-card-product-title">{{ card_product.title }}</div>
  {% render 'price', product: card_product, show_in_card: true, price_class: 'small-margin-top', show_badges: true %}
</div>